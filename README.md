Последовательность выполнения

    Клиент отправляет файл через POST /upload_video/.

    FastAPI:
        Сохраняет видео во временную директорию.
        Добавляет задачи в фон (background tasks) для:
            Конвертации видео в VP9 (FFmpeg).
            Извлечения превью (FFmpeg).
            Загрузки файлов в S3.
            Сохранения ссылок на видео и превью в базе данных.

    FastAPI немедленно возвращает клиенту уведомление, что задача начата, а обработка происходит асинхронно.

    Фоновые задачи выполняются параллельно:
        Конвертация видео в VP9 с помощью FFmpeg.
        Извлечение превью из видео с помощью FFmpeg.
        Загрузка видео и превью в S3.
        Сохранение ссылок на видео и превью в базе данных.

    Удаление временных файлов после завершения всех операций.

Схема выполнения кода

[Клиент] -> (1) Отправка файла -> [FastAPI]
↓
(2) Добавление задачи в фон
↓
[FastAPI Background Tasks]
├── (3.1) Конвертация видео в VP9 (FFmpeg)
├── (3.2) Извлечение превью (FFmpeg)
├── (3.3) Загрузка файлов в S3
└── (3.4) Сохранение ссылок в БД
↓
[Клиент] <- (4) Уведомление: "Задача начата"
↓
(5) Удаление временных файлов


