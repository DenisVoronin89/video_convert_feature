2025-02-22 11:32:39,652 - INFO - Запуск приложения и инициализация базы данных...
2025-02-22 11:32:39,652 - DEBUG - Начало инициализации базы данных...
2025-02-22 11:32:39,721 - INFO - База данных успешно инициализирована.
2025-02-22 11:32:39,721 - INFO - Приложение успешно запущено. Соединение с базой данных установлено.
2025-02-22 11:32:39,721 - INFO - Директория уже существует: ./video_temp
2025-02-22 11:32:39,722 - INFO - Директория уже существует: ./image_temp
2025-02-22 11:32:39,722 - INFO - Директория уже существует: ./output_video
2025-02-22 11:32:39,722 - INFO - Директория уже существует: ./output_preview
2025-02-22 11:32:39,722 - INFO - Директория уже существует: ./user_logo
2025-02-22 11:32:39,738 - INFO - Запуск подписки на канал Redis для получения задач
2025-02-22 11:32:39,744 - INFO - Redis доступен.
2025-02-22 11:32:39,745 - INFO - Подключаемся к Redis...
2025-02-22 11:32:39,745 - INFO - Подписались на канал video_tasks
2025-02-22 11:32:52,350 - INFO - Открытие сессии с БД...
2025-02-22 11:32:52,352 - INFO - Сессия с БД успешно открыта.
2025-02-22 11:32:52,367 - INFO - Начало хеширования номера кошелька.
2025-02-22 11:32:52,367 - INFO - Хеш номера кошелька: 506e81c99176ffc7babd31b0707bb0756a65cc09ebb0c809f95f2171eced598a
2025-02-22 11:32:52,367 - INFO - Поиск пользователя в базе данных.
2025-02-22 11:32:52,396 - INFO - Пользователь найден с ID 3
2025-02-22 11:32:52,396 - INFO - Загрузка профиля пользователя из базы данных.
2025-02-22 11:32:52,441 - INFO - Профиль пользователя: None
2025-02-22 11:32:52,442 - INFO - Попытка получить избранное из кэша Redis.
2025-02-22 11:32:52,449 - INFO - No favorites found in cache for user 3.
2025-02-22 11:32:52,449 - INFO - Избранное не найдено в кэше. Загружаем из базы данных.
2025-02-22 11:32:52,452 - INFO - Избранное загружено из БД: []
2025-02-22 11:32:52,452 - INFO - Генерация токенов для пользователя.
2025-02-22 11:32:52,453 - INFO - Токены успешно сгенерированы.
2025-02-22 11:32:52,453 - INFO - Возвращаем ответ для пользователя с ID 3.
2025-02-22 11:32:52,454 - INFO - Закрытие сессии с БД.
2025-02-22 11:33:19,218 - INFO - Получен запрос на загрузку изображения от пользователя с ID: 3
2025-02-22 11:33:19,238 - INFO - Изображение сохранено во временной директории: ./image_temp/a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp (Размер: 0.07 MB)
2025-02-22 11:33:19,239 - INFO - Изображение успешно загружено: ./image_temp/a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp
2025-02-22 11:33:50,662 - INFO - Открытие сессии с БД...
2025-02-22 11:33:50,665 - INFO - Сессия с БД успешно открыта.
2025-02-22 11:33:50,670 - INFO - Получены данные профиля: {'name': 'John Doe', 'website_or_social': 'https://twitter.com/johndoe', 'activity_hobbies': 'Gaming, Traveling', 'hashtags': None, 'adress': ['123 Example Street, Example City', '456 Another Street, Another City'], 'city': 'Example City', 'coordinates': [(37.7749, -122.4194), (48.8566, 2.3522)], 'is_in_mlm': 1, 'is_incognito': False, 'wallet_number': '0x27b9B8cfa04fA08f66Ad694F679D86EBC7d7355'}
2025-02-22 11:33:50,670 - INFO - Получены данные о изображении: {'image_path': './image_temp/a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp'}
2025-02-22 11:33:50,671 - INFO - Номер кошелька захэширован: 506e81c99176ffc7babd31b0707bb0756a65cc09ebb0c809f95f2171eced598a
2025-02-22 11:33:50,671 - INFO - Путь к изображению: ./image_temp/a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp
2025-02-22 11:33:50,671 - INFO - Абсолютный путь к изображению: /app/image_temp/a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp
2025-02-22 11:33:50,677 - INFO - Изображение перемещено в директорию user_logo: ./user_logo/58a24fa4-7871-42d2-bcd2-31b1c16a660c_a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp (Размер: 0.07 MB)
2025-02-22 11:33:50,677 - INFO - Путь к файлу для сохранения в БД: ./user_logo/58a24fa4-7871-42d2-bcd2-31b1c16a660c_a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp
2025-02-22 11:33:50,677 - INFO - Изображение успешно перемещено в постоянную папку: ./user_logo/58a24fa4-7871-42d2-bcd2-31b1c16a660c_a3617ef4-108f-47dc-b861-d866b7ea75fa_orig_cat.webp
2025-02-22 11:33:50,701 - INFO - Создан профиль для пользователя 3
2025-02-22 11:33:50,702 - INFO - Закрытие сессии с БД.
2025-02-22 11:34:35,629 - ERROR - Ошибка при получении сообщения: Connection closed by server.
2025-02-22 11:34:35,633 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,634 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,634 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,635 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,636 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,637 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,638 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,639 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,640 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,641 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,642 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,642 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,643 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,643 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,643 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,644 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,644 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,645 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,646 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,646 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,646 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,647 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,647 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,647 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,647 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,648 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,648 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,648 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,648 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,649 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,649 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,649 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,650 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,650 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
2025-02-22 11:34:35,650 - ERROR - Ошибка при получении сообщения: Error 111 connecting to redis:6379. Connect call failed ('172.19.0.2', 6379).
